!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?factory(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators"),require("@angular/common")):"function"==typeof define&&define.amd?define("agm-direction",["exports","@angular/core","rxjs","rxjs/operators","@angular/common"],factory):factory((global.ng=global.ng||{},global.ng.angularLibraryStarter={}),global.ng.core,global.rxjs,global.rxjs.operators,global.ng.common)}(this,function(exports,core,rxjs,operators,common){"use strict";var GoogleMapsScriptProtocol,MapsAPILoader=function(){function MapsAPILoader(){}return MapsAPILoader.decorators=[{type:core.Injectable}],MapsAPILoader}(),GoogleMapsAPIWrapper=function(){function GoogleMapsAPIWrapper(_loader,_zone){var _this=this;this._loader=_loader,this._zone=_zone,this._map=new Promise(function(resolve){_this._mapResolver=resolve})}return GoogleMapsAPIWrapper.prototype.createMap=function(el,mapOptions){var _this=this;return this._zone.runOutsideAngular(function(){return _this._loader.load().then(function(){var map=new google.maps.Map(el,mapOptions);_this._mapResolver(map)})})},GoogleMapsAPIWrapper.prototype.setMapOptions=function(options){this._map.then(function(m){m.setOptions(options)})},GoogleMapsAPIWrapper.prototype.createMarker=function(options,addToMap){return void 0===options&&(options={}),void 0===addToMap&&(addToMap=!0),this._map.then(function(map){return addToMap&&(options.map=map),new google.maps.Marker(options)})},GoogleMapsAPIWrapper.prototype.createInfoWindow=function(options){return this._map.then(function(){return new google.maps.InfoWindow(options)})},GoogleMapsAPIWrapper.prototype.createCircle=function(options){return this._map.then(function(map){return options.map=map,new google.maps.Circle(options)})},GoogleMapsAPIWrapper.prototype.createRectangle=function(options){return this._map.then(function(map){return options.map=map,new google.maps.Rectangle(options)})},GoogleMapsAPIWrapper.prototype.createPolyline=function(options){return this.getNativeMap().then(function(map){var line=new google.maps.Polyline(options);return line.setMap(map),line})},GoogleMapsAPIWrapper.prototype.createPolygon=function(options){return this.getNativeMap().then(function(map){var polygon=new google.maps.Polygon(options);return polygon.setMap(map),polygon})},GoogleMapsAPIWrapper.prototype.createDataLayer=function(options){return this._map.then(function(m){var data=new google.maps.Data(options);return data.setMap(m),data})},GoogleMapsAPIWrapper.prototype.containsLocation=function(latLng,polygon){return google.maps.geometry.poly.containsLocation(latLng,polygon)},GoogleMapsAPIWrapper.prototype.subscribeToMapEvent=function(eventName){var _this=this;return new rxjs.Observable(function(observer){_this._map.then(function(m){m.addListener(eventName,function(arg){_this._zone.run(function(){return observer.next(arg)})})})})},GoogleMapsAPIWrapper.prototype.clearInstanceListeners=function(){this._map.then(function(map){google.maps.event.clearInstanceListeners(map)})},GoogleMapsAPIWrapper.prototype.setCenter=function(latLng){return this._map.then(function(map){return map.setCenter(latLng)})},GoogleMapsAPIWrapper.prototype.getZoom=function(){return this._map.then(function(map){return map.getZoom()})},GoogleMapsAPIWrapper.prototype.getBounds=function(){return this._map.then(function(map){return map.getBounds()})},GoogleMapsAPIWrapper.prototype.getMapTypeId=function(){return this._map.then(function(map){return map.getMapTypeId()})},GoogleMapsAPIWrapper.prototype.setZoom=function(zoom){return this._map.then(function(map){return map.setZoom(zoom)})},GoogleMapsAPIWrapper.prototype.getCenter=function(){return this._map.then(function(map){return map.getCenter()})},GoogleMapsAPIWrapper.prototype.panTo=function(latLng){return this._map.then(function(map){return map.panTo(latLng)})},GoogleMapsAPIWrapper.prototype.panBy=function(x,y){return this._map.then(function(map){return map.panBy(x,y)})},GoogleMapsAPIWrapper.prototype.fitBounds=function(latLng){return this._map.then(function(map){return map.fitBounds(latLng)})},GoogleMapsAPIWrapper.prototype.panToBounds=function(latLng){return this._map.then(function(map){return map.panToBounds(latLng)})},GoogleMapsAPIWrapper.prototype.getNativeMap=function(){return this._map},GoogleMapsAPIWrapper.prototype.triggerMapEvent=function(eventName){return this._map.then(function(m){return google.maps.event.trigger(m,eventName)})},GoogleMapsAPIWrapper.decorators=[{type:core.Injectable}],GoogleMapsAPIWrapper.ctorParameters=function(){return[{type:MapsAPILoader},{type:core.NgZone}]},GoogleMapsAPIWrapper}(),MarkerManager=function(){function MarkerManager(_mapsWrapper,_zone){this._mapsWrapper=_mapsWrapper,this._zone=_zone,this._markers=new Map}return MarkerManager.prototype.deleteMarker=function(marker){var _this=this,m=this._markers.get(marker);return null==m?Promise.resolve():m.then(function(m){return _this._zone.run(function(){m.setMap(null),_this._markers.delete(marker)})})},MarkerManager.prototype.updateMarkerPosition=function(marker){return this._markers.get(marker).then(function(m){return m.setPosition({lat:marker.latitude,lng:marker.longitude})})},MarkerManager.prototype.updateTitle=function(marker){return this._markers.get(marker).then(function(m){return m.setTitle(marker.title)})},MarkerManager.prototype.updateLabel=function(marker){return this._markers.get(marker).then(function(m){m.setLabel(marker.label)})},MarkerManager.prototype.updateDraggable=function(marker){return this._markers.get(marker).then(function(m){return m.setDraggable(marker.draggable)})},MarkerManager.prototype.updateIcon=function(marker){return this._markers.get(marker).then(function(m){return m.setIcon(marker.iconUrl)})},MarkerManager.prototype.updateOpacity=function(marker){return this._markers.get(marker).then(function(m){return m.setOpacity(marker.opacity)})},MarkerManager.prototype.updateVisible=function(marker){return this._markers.get(marker).then(function(m){return m.setVisible(marker.visible)})},MarkerManager.prototype.updateZIndex=function(marker){return this._markers.get(marker).then(function(m){return m.setZIndex(marker.zIndex)})},MarkerManager.prototype.updateClickable=function(marker){return this._markers.get(marker).then(function(m){return m.setClickable(marker.clickable)})},MarkerManager.prototype.updateAnimation=function(marker){return this._markers.get(marker).then(function(m){"string"==typeof marker.animation?m.setAnimation(google.maps.Animation[marker.animation]):m.setAnimation(marker.animation)})},MarkerManager.prototype.addMarker=function(marker){var markerPromise=this._mapsWrapper.createMarker({position:{lat:marker.latitude,lng:marker.longitude},label:marker.label,draggable:marker.draggable,icon:marker.iconUrl,opacity:marker.opacity,visible:marker.visible,zIndex:marker.zIndex,title:marker.title,clickable:marker.clickable,animation:"string"==typeof marker.animation?google.maps.Animation[marker.animation]:marker.animation});this._markers.set(marker,markerPromise)},MarkerManager.prototype.getNativeMarker=function(marker){return this._markers.get(marker)},MarkerManager.prototype.createEventObservable=function(eventName,marker){var _this=this;return new rxjs.Observable(function(observer){_this._markers.get(marker).then(function(m){m.addListener(eventName,function(e){return _this._zone.run(function(){return observer.next(e)})})})})},MarkerManager.decorators=[{type:core.Injectable}],MarkerManager.ctorParameters=function(){return[{type:GoogleMapsAPIWrapper},{type:core.NgZone}]},MarkerManager}(),InfoWindowManager=function(){function InfoWindowManager(_mapsWrapper,_zone,_markerManager){this._mapsWrapper=_mapsWrapper,this._zone=_zone,this._markerManager=_markerManager,this._infoWindows=new Map}return InfoWindowManager.prototype.deleteInfoWindow=function(infoWindow){var _this=this,iWindow=this._infoWindows.get(infoWindow);return null==iWindow?Promise.resolve():iWindow.then(function(i){return _this._zone.run(function(){i.close(),_this._infoWindows.delete(infoWindow)})})},InfoWindowManager.prototype.setPosition=function(infoWindow){return this._infoWindows.get(infoWindow).then(function(i){return i.setPosition({lat:infoWindow.latitude,lng:infoWindow.longitude})})},InfoWindowManager.prototype.setZIndex=function(infoWindow){return this._infoWindows.get(infoWindow).then(function(i){return i.setZIndex(infoWindow.zIndex)})},InfoWindowManager.prototype.open=function(infoWindow){var _this=this;return this._infoWindows.get(infoWindow).then(function(w){return null!=infoWindow.hostMarker?_this._markerManager.getNativeMarker(infoWindow.hostMarker).then(function(marker){return _this._mapsWrapper.getNativeMap().then(function(map){return w.open(map,marker)})}):_this._mapsWrapper.getNativeMap().then(function(map){return w.open(map)})})},InfoWindowManager.prototype.close=function(infoWindow){return this._infoWindows.get(infoWindow).then(function(w){return w.close()})},InfoWindowManager.prototype.setOptions=function(infoWindow,options){return this._infoWindows.get(infoWindow).then(function(i){return i.setOptions(options)})},InfoWindowManager.prototype.addInfoWindow=function(infoWindow){var options={content:infoWindow.content,maxWidth:infoWindow.maxWidth,zIndex:infoWindow.zIndex,disableAutoPan:infoWindow.disableAutoPan};"number"==typeof infoWindow.latitude&&"number"==typeof infoWindow.longitude&&(options.position={lat:infoWindow.latitude,lng:infoWindow.longitude});var infoWindowPromise=this._mapsWrapper.createInfoWindow(options);this._infoWindows.set(infoWindow,infoWindowPromise)},InfoWindowManager.prototype.createEventObservable=function(eventName,infoWindow){var _this=this;return new rxjs.Observable(function(observer){_this._infoWindows.get(infoWindow).then(function(i){i.addListener(eventName,function(e){return _this._zone.run(function(){return observer.next(e)})})})})},InfoWindowManager.decorators=[{type:core.Injectable}],InfoWindowManager.ctorParameters=function(){return[{type:GoogleMapsAPIWrapper},{type:core.NgZone},{type:MarkerManager}]},InfoWindowManager}(),FitBoundsAccessor=function(){},infoWindowId=0,AgmInfoWindow=function(){function AgmInfoWindow(_infoWindowManager,_el){this._infoWindowManager=_infoWindowManager,this._el=_el,this.isOpen=!1,this.infoWindowClose=new core.EventEmitter,this._infoWindowAddedToManager=!1,this._id=(infoWindowId++).toString()}return AgmInfoWindow.prototype.ngOnInit=function(){this.content=this._el.nativeElement.querySelector(".agm-info-window-content"),this._infoWindowManager.addInfoWindow(this),this._infoWindowAddedToManager=!0,this._updateOpenState(),this._registerEventListeners()},AgmInfoWindow.prototype.ngOnChanges=function(changes){this._infoWindowAddedToManager&&((changes.latitude||changes.longitude)&&"number"==typeof this.latitude&&"number"==typeof this.longitude&&this._infoWindowManager.setPosition(this),changes.zIndex&&this._infoWindowManager.setZIndex(this),changes.isOpen&&this._updateOpenState(),this._setInfoWindowOptions(changes))},AgmInfoWindow.prototype._registerEventListeners=function(){var _this=this;this._infoWindowManager.createEventObservable("closeclick",this).subscribe(function(){_this.isOpen=!1,_this.infoWindowClose.emit()})},AgmInfoWindow.prototype._updateOpenState=function(){this.isOpen?this.open():this.close()},AgmInfoWindow.prototype._setInfoWindowOptions=function(changes){var options={};Object.keys(changes).filter(function(k){return-1!==AgmInfoWindow._infoWindowOptionsInputs.indexOf(k)}).forEach(function(k){options[k]=changes[k].currentValue}),this._infoWindowManager.setOptions(this,options)},AgmInfoWindow.prototype.open=function(){return this._infoWindowManager.open(this)},AgmInfoWindow.prototype.close=function(){var _this=this;return this._infoWindowManager.close(this).then(function(){_this.infoWindowClose.emit()})},AgmInfoWindow.prototype.id=function(){return this._id},AgmInfoWindow.prototype.toString=function(){return"AgmInfoWindow-"+this._id.toString()},AgmInfoWindow.prototype.ngOnDestroy=function(){this._infoWindowManager.deleteInfoWindow(this)},AgmInfoWindow._infoWindowOptionsInputs=["disableAutoPan","maxWidth"],AgmInfoWindow.decorators=[{type:core.Component,args:[{selector:"agm-info-window",template:"<div class='agm-info-window-content'>\n      <ng-content></ng-content>\n    </div>\n  "}]}],AgmInfoWindow.ctorParameters=function(){return[{type:InfoWindowManager},{type:core.ElementRef}]},AgmInfoWindow.propDecorators={latitude:[{type:core.Input}],longitude:[{type:core.Input}],disableAutoPan:[{type:core.Input}],zIndex:[{type:core.Input}],maxWidth:[{type:core.Input}],isOpen:[{type:core.Input}],infoWindowClose:[{type:core.Output}]},AgmInfoWindow}(),markerId=0,WindowRef=(function(){function AgmMarker(_markerManager){this._markerManager=_markerManager,this.draggable=!1,this.visible=!0,this.openInfoWindow=!0,this.opacity=1,this.zIndex=1,this.clickable=!0,this.markerClick=new core.EventEmitter,this.markerRightClick=new core.EventEmitter,this.dragEnd=new core.EventEmitter,this.mouseOver=new core.EventEmitter,this.mouseOut=new core.EventEmitter,this.infoWindow=new core.QueryList,this._markerAddedToManger=!1,this._observableSubscriptions=[],this._fitBoundsDetails$=new rxjs.ReplaySubject(1),this._id=(markerId++).toString()}AgmMarker.prototype.ngAfterContentInit=function(){var _this=this;this.handleInfoWindowUpdate(),this.infoWindow.changes.subscribe(function(){return _this.handleInfoWindowUpdate()})},AgmMarker.prototype.handleInfoWindowUpdate=function(){var _this=this;if(1<this.infoWindow.length)throw new Error("Expected no more than one info window.");this.infoWindow.forEach(function(marker){marker.hostMarker=_this})},AgmMarker.prototype.ngOnChanges=function(changes){if("string"==typeof this.latitude&&(this.latitude=Number(this.latitude)),"string"==typeof this.longitude&&(this.longitude=Number(this.longitude)),"number"==typeof this.latitude&&"number"==typeof this.longitude){if(!this._markerAddedToManger)return this._markerManager.addMarker(this),this._updateFitBoundsDetails(),this._markerAddedToManger=!0,void this._addEventListeners();(changes.latitude||changes.longitude)&&(this._markerManager.updateMarkerPosition(this),this._updateFitBoundsDetails()),changes.title&&this._markerManager.updateTitle(this),changes.label&&this._markerManager.updateLabel(this),changes.draggable&&this._markerManager.updateDraggable(this),changes.iconUrl&&this._markerManager.updateIcon(this),changes.opacity&&this._markerManager.updateOpacity(this),changes.visible&&this._markerManager.updateVisible(this),changes.zIndex&&this._markerManager.updateZIndex(this),changes.clickable&&this._markerManager.updateClickable(this),changes.animation&&this._markerManager.updateAnimation(this)}},AgmMarker.prototype.getFitBoundsDetails$=function(){return this._fitBoundsDetails$.asObservable()},AgmMarker.prototype._updateFitBoundsDetails=function(){this._fitBoundsDetails$.next({latLng:{lat:this.latitude,lng:this.longitude}})},AgmMarker.prototype._addEventListeners=function(){var _this=this,cs=this._markerManager.createEventObservable("click",this).subscribe(function(){_this.openInfoWindow&&_this.infoWindow.forEach(function(infoWindow){return infoWindow.open()}),_this.markerClick.emit(_this)});this._observableSubscriptions.push(cs);var rc=this._markerManager.createEventObservable("rightclick",this).subscribe(function(){_this.markerRightClick.emit(null)});this._observableSubscriptions.push(rc);var ds=this._markerManager.createEventObservable("dragend",this).subscribe(function(e){_this.dragEnd.emit({coords:{lat:e.latLng.lat(),lng:e.latLng.lng()}})});this._observableSubscriptions.push(ds);var mover=this._markerManager.createEventObservable("mouseover",this).subscribe(function(e){_this.mouseOver.emit({coords:{lat:e.latLng.lat(),lng:e.latLng.lng()}})});this._observableSubscriptions.push(mover);var mout=this._markerManager.createEventObservable("mouseout",this).subscribe(function(e){_this.mouseOut.emit({coords:{lat:e.latLng.lat(),lng:e.latLng.lng()}})});this._observableSubscriptions.push(mout)},AgmMarker.prototype.id=function(){return this._id},AgmMarker.prototype.toString=function(){return"AgmMarker-"+this._id.toString()},AgmMarker.prototype.ngOnDestroy=function(){this._markerManager.deleteMarker(this),this._observableSubscriptions.forEach(function(s){return s.unsubscribe()})},AgmMarker.decorators=[{type:core.Directive,args:[{selector:"agm-marker",providers:[{provide:FitBoundsAccessor,useExisting:core.forwardRef(function(){return AgmMarker})}],inputs:["latitude","longitude","title","label","draggable: markerDraggable","iconUrl","openInfoWindow","opacity","visible","zIndex","animation"],outputs:["markerClick","dragEnd","mouseOver","mouseOut"]}]}],AgmMarker.ctorParameters=function(){return[{type:MarkerManager}]},AgmMarker.propDecorators={latitude:[{type:core.Input}],longitude:[{type:core.Input}],title:[{type:core.Input}],label:[{type:core.Input}],draggable:[{type:core.Input,args:["markerDraggable"]}],iconUrl:[{type:core.Input}],visible:[{type:core.Input}],openInfoWindow:[{type:core.Input}],opacity:[{type:core.Input}],zIndex:[{type:core.Input}],clickable:[{type:core.Input,args:["markerClickable"]}],markerClick:[{type:core.Output}],markerRightClick:[{type:core.Output}],dragEnd:[{type:core.Output}],mouseOver:[{type:core.Output}],mouseOut:[{type:core.Output}],infoWindow:[{type:core.ContentChildren,args:[AgmInfoWindow]}]}}(),function(){function WindowRef(){}return WindowRef.prototype.getNativeWindow=function(){return window},WindowRef}()),DocumentRef=function(){function DocumentRef(){}return DocumentRef.prototype.getNativeDocument=function(){return document},DocumentRef}(),__extends=function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();!function(GoogleMapsScriptProtocol){GoogleMapsScriptProtocol[GoogleMapsScriptProtocol.HTTP=1]="HTTP",GoogleMapsScriptProtocol[GoogleMapsScriptProtocol.HTTPS=2]="HTTPS",GoogleMapsScriptProtocol[GoogleMapsScriptProtocol.AUTO=3]="AUTO"}(GoogleMapsScriptProtocol||(GoogleMapsScriptProtocol={}));var LAZY_MAPS_API_CONFIG=new core.InjectionToken("angular-google-maps LAZY_MAPS_API_CONFIG"),extendStatics=(function(_super){function LazyMapsAPILoader(config,w,d){void 0===config&&(config=null);var _this=_super.call(this)||this;return _this._SCRIPT_ID="agmGoogleMapsApiScript",_this.callbackName="agmLazyMapsAPILoader",_this._config=config||{},_this._windowRef=w,_this._documentRef=d,_this}__extends(LazyMapsAPILoader,_super),LazyMapsAPILoader.prototype.load=function(){var window=this._windowRef.getNativeWindow();if(window.google&&window.google.maps)return Promise.resolve();if(this._scriptLoadingPromise)return this._scriptLoadingPromise;var scriptOnPage=this._documentRef.getNativeDocument().getElementById(this._SCRIPT_ID);if(scriptOnPage)return this._assignScriptLoadingPromise(scriptOnPage),this._scriptLoadingPromise;var script=this._documentRef.getNativeDocument().createElement("script");return script.type="text/javascript",script.async=!0,script.defer=!0,script.id=this._SCRIPT_ID,script.src=this._getScriptSrc(this.callbackName),this._assignScriptLoadingPromise(script),this._documentRef.getNativeDocument().body.appendChild(script),this._scriptLoadingPromise},LazyMapsAPILoader.prototype._assignScriptLoadingPromise=function(scriptElem){var _this=this;this._scriptLoadingPromise=new Promise(function(resolve,reject){_this._windowRef.getNativeWindow()[_this.callbackName]=function(){resolve()},scriptElem.onerror=function(error){reject(error)}})},LazyMapsAPILoader.prototype._getScriptSrc=function(callbackName){var protocol;switch(this._config&&this._config.protocol||GoogleMapsScriptProtocol.HTTPS){case GoogleMapsScriptProtocol.AUTO:protocol="";break;case GoogleMapsScriptProtocol.HTTP:protocol="http:";break;case GoogleMapsScriptProtocol.HTTPS:protocol="https:"}var hostAndPath=this._config.hostAndPath||"maps.googleapis.com/maps/api/js",queryParams={v:this._config.apiVersion||"3",callback:callbackName,key:this._config.apiKey,client:this._config.clientId,channel:this._config.channel,libraries:this._config.libraries,region:this._config.region,language:this._config.language};return protocol+"//"+hostAndPath+"?"+Object.keys(queryParams).filter(function(k){return null!=queryParams[k]}).filter(function(k){return!Array.isArray(queryParams[k])||Array.isArray(queryParams[k])&&0<queryParams[k].length}).map(function(k){var i=queryParams[k];return Array.isArray(i)?{key:k,value:i.join(",")}:{key:k,value:queryParams[k]}}).map(function(entry){return entry.key+"="+entry.value}).join("&")},LazyMapsAPILoader.decorators=[{type:core.Injectable}],LazyMapsAPILoader.ctorParameters=function(){return[{type:void 0,decorators:[{type:core.Optional},{type:core.Inject,args:[LAZY_MAPS_API_CONFIG]}]},{type:WindowRef},{type:DocumentRef}]}}(MapsAPILoader),Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])});function __extends$1(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}function __read(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||0<n--)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}
/**
     * @license Angular v6.0.0
     * (c) 2010-2018 Google, Inc. https://angular.io/
     * License: MIT
     */
/**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var HttpHandler=function(){},HttpBackend=function(){},HttpHeaders=function(){function HttpHeaders(headers){var _this=this;this.normalizedNames=new Map,this.lazyUpdate=null,headers?this.lazyInit="string"==typeof headers?function(){_this.headers=new Map,headers.split("\n").forEach(function(line){var index=line.indexOf(":");if(0<index){var name_1=line.slice(0,index),key=name_1.toLowerCase(),value=line.slice(index+1).trim();_this.maybeSetNormalizedName(name_1,key),_this.headers.has(key)?_this.headers.get(key).push(value):_this.headers.set(key,[value])}})}:function(){_this.headers=new Map,Object.keys(headers).forEach(function(name){var values=headers[name],key=name.toLowerCase();"string"==typeof values&&(values=[values]),0<values.length&&(_this.headers.set(key,values),_this.maybeSetNormalizedName(name,key))})}:this.headers=new Map}return HttpHeaders.prototype.has=function(name){return this.init(),this.headers.has(name.toLowerCase())},HttpHeaders.prototype.get=function(name){this.init();var values=this.headers.get(name.toLowerCase());return values&&0<values.length?values[0]:null},HttpHeaders.prototype.keys=function(){return this.init(),Array.from(this.normalizedNames.values())},HttpHeaders.prototype.getAll=function(name){return this.init(),this.headers.get(name.toLowerCase())||null},HttpHeaders.prototype.append=function(name,value){return this.clone({name:name,value:value,op:"a"})},HttpHeaders.prototype.set=function(name,value){return this.clone({name:name,value:value,op:"s"})},HttpHeaders.prototype.delete=function(name,value){return this.clone({name:name,value:value,op:"d"})},HttpHeaders.prototype.maybeSetNormalizedName=function(name,lcName){this.normalizedNames.has(lcName)||this.normalizedNames.set(lcName,name)},HttpHeaders.prototype.init=function(){var _this=this;this.lazyInit&&(this.lazyInit instanceof HttpHeaders?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(function(update){return _this.applyUpdate(update)}),this.lazyUpdate=null))},HttpHeaders.prototype.copyFrom=function(other){var _this=this;other.init(),Array.from(other.headers.keys()).forEach(function(key){_this.headers.set(key,other.headers.get(key)),_this.normalizedNames.set(key,other.normalizedNames.get(key))})},HttpHeaders.prototype.clone=function(update){var clone=new HttpHeaders;return clone.lazyInit=this.lazyInit&&this.lazyInit instanceof HttpHeaders?this.lazyInit:this,clone.lazyUpdate=(this.lazyUpdate||[]).concat([update]),clone},HttpHeaders.prototype.applyUpdate=function(update){var key=update.name.toLowerCase();switch(update.op){case"a":case"s":var value=update.value;if("string"==typeof value&&(value=[value]),0===value.length)return;this.maybeSetNormalizedName(update.name,key);var base=("a"===update.op?this.headers.get(key):void 0)||[];base.push.apply(base,function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar}(value)),this.headers.set(key,base);break;case"d":var toDelete_1=update.value;if(toDelete_1){var existing=this.headers.get(key);if(!existing)return;0===(existing=existing.filter(function(value){return-1===toDelete_1.indexOf(value)})).length?(this.headers.delete(key),this.normalizedNames.delete(key)):this.headers.set(key,existing)}else this.headers.delete(key),this.normalizedNames.delete(key)}},HttpHeaders.prototype.forEach=function(fn){var _this=this;this.init(),Array.from(this.normalizedNames.keys()).forEach(function(key){return fn(_this.normalizedNames.get(key),_this.headers.get(key))})},HttpHeaders}(),HttpUrlEncodingCodec=function(){function HttpUrlEncodingCodec(){}return HttpUrlEncodingCodec.prototype.encodeKey=function(k){return standardEncoding(k)},HttpUrlEncodingCodec.prototype.encodeValue=function(v){return standardEncoding(v)},HttpUrlEncodingCodec.prototype.decodeKey=function(k){return decodeURIComponent(k)},HttpUrlEncodingCodec.prototype.decodeValue=function(v){return decodeURIComponent(v)},HttpUrlEncodingCodec}();function standardEncoding(v){return encodeURIComponent(v).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var HttpParams=function(){function HttpParams(options){void 0===options&&(options={});var rawParams,codec,map$$1,_this=this;if(this.updates=null,this.cloneFrom=null,this.encoder=options.encoder||new HttpUrlEncodingCodec,options.fromString){if(options.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=(rawParams=options.fromString,codec=this.encoder,map$$1=new Map,0<rawParams.length&&rawParams.split("&").forEach(function(param){var eqIdx=param.indexOf("="),_a=__read(-1==eqIdx?[codec.decodeKey(param),""]:[codec.decodeKey(param.slice(0,eqIdx)),codec.decodeValue(param.slice(eqIdx+1))],2),key=_a[0],val=_a[1],list=map$$1.get(key)||[];list.push(val),map$$1.set(key,list)}),map$$1)}else options.fromObject?(this.map=new Map,Object.keys(options.fromObject).forEach(function(key){var value=options.fromObject[key];_this.map.set(key,Array.isArray(value)?value:[value])})):this.map=null}return HttpParams.prototype.has=function(param){return this.init(),this.map.has(param)},HttpParams.prototype.get=function(param){this.init();var res=this.map.get(param);return res?res[0]:null},HttpParams.prototype.getAll=function(param){return this.init(),this.map.get(param)||null},HttpParams.prototype.keys=function(){return this.init(),Array.from(this.map.keys())},HttpParams.prototype.append=function(param,value){return this.clone({param:param,value:value,op:"a"})},HttpParams.prototype.set=function(param,value){return this.clone({param:param,value:value,op:"s"})},HttpParams.prototype.delete=function(param,value){return this.clone({param:param,value:value,op:"d"})},HttpParams.prototype.toString=function(){var _this=this;return this.init(),this.keys().map(function(key){var eKey=_this.encoder.encodeKey(key);return _this.map.get(key).map(function(value){return eKey+"="+_this.encoder.encodeValue(value)}).join("&")}).join("&")},HttpParams.prototype.clone=function(update){var clone=new HttpParams({encoder:this.encoder});return clone.cloneFrom=this.cloneFrom||this,clone.updates=(this.updates||[]).concat([update]),clone},HttpParams.prototype.init=function(){var _this=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(function(key){return _this.map.set(key,_this.cloneFrom.map.get(key))}),this.updates.forEach(function(update){switch(update.op){case"a":case"s":var base=("a"===update.op?_this.map.get(update.param):void 0)||[];base.push(update.value),_this.map.set(update.param,base);break;case"d":if(void 0===update.value){_this.map.delete(update.param);break}var base_1=_this.map.get(update.param)||[],idx=base_1.indexOf(update.value);-1!==idx&&base_1.splice(idx,1),0<base_1.length?_this.map.set(update.param,base_1):_this.map.delete(update.param)}}),this.cloneFrom=null)},HttpParams}();
/**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */function isArrayBuffer(value){return"undefined"!=typeof ArrayBuffer&&value instanceof ArrayBuffer}function isBlob(value){return"undefined"!=typeof Blob&&value instanceof Blob}function isFormData(value){return"undefined"!=typeof FormData&&value instanceof FormData}var HttpEventType,HttpRequest=function(){function HttpRequest(method,url,third,fourth){var options;if(this.url=url,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=method.toUpperCase(),function(method){switch(method){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||fourth?(this.body=void 0!==third?third:null,options=fourth):options=third,options&&(this.reportProgress=!!options.reportProgress,this.withCredentials=!!options.withCredentials,options.responseType&&(this.responseType=options.responseType),options.headers&&(this.headers=options.headers),options.params&&(this.params=options.params)),this.headers||(this.headers=new HttpHeaders),this.params){var params=this.params.toString();if(0===params.length)this.urlWithParams=url;else{var qIdx=url.indexOf("?"),sep=-1===qIdx?"?":qIdx<url.length-1?"&":"";this.urlWithParams=url+sep+params}}else this.params=new HttpParams,this.urlWithParams=url}return HttpRequest.prototype.serializeBody=function(){return null===this.body?null:isArrayBuffer(this.body)||isBlob(this.body)||isFormData(this.body)||"string"==typeof this.body?this.body:this.body instanceof HttpParams?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()},HttpRequest.prototype.detectContentTypeHeader=function(){return null===this.body?null:isFormData(this.body)?null:isBlob(this.body)?this.body.type||null:isArrayBuffer(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof HttpParams?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null},HttpRequest.prototype.clone=function(update){void 0===update&&(update={});var method=update.method||this.method,url=update.url||this.url,responseType=update.responseType||this.responseType,body=void 0!==update.body?update.body:this.body,withCredentials=void 0!==update.withCredentials?update.withCredentials:this.withCredentials,reportProgress=void 0!==update.reportProgress?update.reportProgress:this.reportProgress,headers=update.headers||this.headers,params=update.params||this.params;return void 0!==update.setHeaders&&(headers=Object.keys(update.setHeaders).reduce(function(headers,name){return headers.set(name,update.setHeaders[name])},headers)),update.setParams&&(params=Object.keys(update.setParams).reduce(function(params,param){return params.set(param,update.setParams[param])},params)),new HttpRequest(method,url,body,{params:params,headers:headers,reportProgress:reportProgress,responseType:responseType,withCredentials:withCredentials})},HttpRequest}();
/**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */!function(HttpEventType){HttpEventType[HttpEventType.Sent=0]="Sent",HttpEventType[HttpEventType.UploadProgress=1]="UploadProgress",HttpEventType[HttpEventType.ResponseHeader=2]="ResponseHeader",HttpEventType[HttpEventType.DownloadProgress=3]="DownloadProgress",HttpEventType[HttpEventType.Response=4]="Response",HttpEventType[HttpEventType.User=5]="User"}(HttpEventType||(HttpEventType={}));var HttpResponseBase=function(init,defaultStatus,defaultStatusText){void 0===defaultStatus&&(defaultStatus=200),void 0===defaultStatusText&&(defaultStatusText="OK"),this.headers=init.headers||new HttpHeaders,this.status=void 0!==init.status?init.status:defaultStatus,this.statusText=init.statusText||defaultStatusText,this.url=init.url||null,this.ok=200<=this.status&&this.status<300},HttpHeaderResponse=function(_super){function HttpHeaderResponse(init){void 0===init&&(init={});var _this=_super.call(this,init)||this;return _this.type=HttpEventType.ResponseHeader,_this}return __extends$1(HttpHeaderResponse,_super),HttpHeaderResponse.prototype.clone=function(update){return void 0===update&&(update={}),new HttpHeaderResponse({headers:update.headers||this.headers,status:void 0!==update.status?update.status:this.status,statusText:update.statusText||this.statusText,url:update.url||this.url||void 0})},HttpHeaderResponse}(HttpResponseBase),HttpResponse=function(_super){function HttpResponse(init){void 0===init&&(init={});var _this=_super.call(this,init)||this;return _this.type=HttpEventType.Response,_this.body=void 0!==init.body?init.body:null,_this}return __extends$1(HttpResponse,_super),HttpResponse.prototype.clone=function(update){return void 0===update&&(update={}),new HttpResponse({body:void 0!==update.body?update.body:this.body,headers:update.headers||this.headers,status:void 0!==update.status?update.status:this.status,statusText:update.statusText||this.statusText,url:update.url||this.url||void 0})},HttpResponse}(HttpResponseBase),HttpErrorResponse=function(_super){function HttpErrorResponse(init){var _this=_super.call(this,init,0,"Unknown Error")||this;return _this.name="HttpErrorResponse",_this.ok=!1,200<=_this.status&&_this.status<300?_this.message="Http failure during parsing for "+(init.url||"(unknown url)"):_this.message="Http failure response for "+(init.url||"(unknown url)")+": "+init.status+" "+init.statusText,_this.error=init.error||null,_this}return __extends$1(HttpErrorResponse,_super),HttpErrorResponse}(HttpResponseBase);
/**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
function addBody(options,body){return{body:body,headers:options.headers,observe:options.observe,params:options.params,reportProgress:options.reportProgress,responseType:options.responseType,withCredentials:options.withCredentials}}var HttpClient=function(){function HttpClient(handler){this.handler=handler}return HttpClient.prototype.request=function(first,url,options){var req,_this=this;if(void 0===options&&(options={}),first instanceof HttpRequest)req=first;else{var headers=void 0;headers=options.headers instanceof HttpHeaders?options.headers:new HttpHeaders(options.headers);var params=void 0;options.params&&(params=options.params instanceof HttpParams?options.params:new HttpParams({fromObject:options.params})),req=new HttpRequest(first,url,void 0!==options.body?options.body:null,{headers:headers,params:params,reportProgress:options.reportProgress,responseType:options.responseType||"json",withCredentials:options.withCredentials})}var events$=rxjs.of(req).pipe(operators.concatMap(function(req){return _this.handler.handle(req)}));if(first instanceof HttpRequest||"events"===options.observe)return events$;var res$=events$.pipe(operators.filter(function(event){return event instanceof HttpResponse}));switch(options.observe||"body"){case"body":switch(req.responseType){case"arraybuffer":return res$.pipe(operators.map(function(res){if(null!==res.body&&!(res.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return res.body}));case"blob":return res$.pipe(operators.map(function(res){if(null!==res.body&&!(res.body instanceof Blob))throw new Error("Response is not a Blob.");return res.body}));case"text":return res$.pipe(operators.map(function(res){if(null!==res.body&&"string"!=typeof res.body)throw new Error("Response is not a string.");return res.body}));case"json":default:return res$.pipe(operators.map(function(res){return res.body}))}case"response":return res$;default:throw new Error("Unreachable: unhandled observe type "+options.observe+"}")}},HttpClient.prototype.delete=function(url,options){return void 0===options&&(options={}),this.request("DELETE",url,options)},HttpClient.prototype.get=function(url,options){return void 0===options&&(options={}),this.request("GET",url,options)},HttpClient.prototype.head=function(url,options){return void 0===options&&(options={}),this.request("HEAD",url,options)},HttpClient.prototype.jsonp=function(url,callbackParam){return this.request("JSONP",url,{params:(new HttpParams).append(callbackParam,"JSONP_CALLBACK"),observe:"body",responseType:"json"})},HttpClient.prototype.options=function(url,options){return void 0===options&&(options={}),this.request("OPTIONS",url,options)},HttpClient.prototype.patch=function(url,body,options){return void 0===options&&(options={}),this.request("PATCH",url,addBody(options,body))},HttpClient.prototype.post=function(url,body,options){return void 0===options&&(options={}),this.request("POST",url,addBody(options,body))},HttpClient.prototype.put=function(url,body,options){return void 0===options&&(options={}),this.request("PUT",url,addBody(options,body))},HttpClient.decorators=[{type:core.Injectable}],HttpClient.ctorParameters=function(){return[{type:HttpHandler}]},HttpClient}(),HttpInterceptorHandler=function(){function HttpInterceptorHandler(next,interceptor){this.next=next,this.interceptor=interceptor}return HttpInterceptorHandler.prototype.handle=function(req){return this.interceptor.intercept(req,this.next)},HttpInterceptorHandler}(),HTTP_INTERCEPTORS=new core.InjectionToken("HTTP_INTERCEPTORS"),NoopInterceptor=function(){function NoopInterceptor(){}return NoopInterceptor.prototype.intercept=function(req,next){return next.handle(req)},NoopInterceptor.decorators=[{type:core.Injectable}],NoopInterceptor.ctorParameters=function(){return[]},NoopInterceptor}(),XSSI_PREFIX=/^\)\]\}',?\n/;
/**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */var XhrFactory=function(){},BrowserXhr=function(){function BrowserXhr(){}return BrowserXhr.prototype.build=function(){return new XMLHttpRequest},BrowserXhr.decorators=[{type:core.Injectable}],BrowserXhr.ctorParameters=function(){return[]},BrowserXhr}(),HttpXhrBackend=function(){function HttpXhrBackend(xhrFactory){this.xhrFactory=xhrFactory}return HttpXhrBackend.prototype.handle=function(req){var _this=this;if("JSONP"===req.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new rxjs.Observable(function(observer){var xhr=_this.xhrFactory.build();if(xhr.open(req.method,req.urlWithParams),req.withCredentials&&(xhr.withCredentials=!0),req.headers.forEach(function(name,values){return xhr.setRequestHeader(name,values.join(","))}),req.headers.has("Accept")||xhr.setRequestHeader("Accept","application/json, text/plain, */*"),!req.headers.has("Content-Type")){var detectedType=req.detectContentTypeHeader();null!==detectedType&&xhr.setRequestHeader("Content-Type",detectedType)}if(req.responseType){var responseType=req.responseType.toLowerCase();xhr.responseType="json"!==responseType?responseType:"text"}var reqBody=req.serializeBody(),headerResponse=null,partialFromXhr=function(){if(null!==headerResponse)return headerResponse;var status=1223===xhr.status?204:xhr.status,statusText=xhr.statusText||"OK",headers=new HttpHeaders(xhr.getAllResponseHeaders()),url=function(xhr){return"responseURL"in xhr&&xhr.responseURL?xhr.responseURL:/^X-Request-URL:/m.test(xhr.getAllResponseHeaders())?xhr.getResponseHeader("X-Request-URL"):null}(xhr)||req.url;return headerResponse=new HttpHeaderResponse({headers:headers,status:status,statusText:statusText,url:url})},onLoad=function(){var _a=partialFromXhr(),headers=_a.headers,status=_a.status,statusText=_a.statusText,url=_a.url,body=null;204!==status&&(body=void 0===xhr.response?xhr.responseText:xhr.response),0===status&&(status=body?200:0);var ok=200<=status&&status<300;if("json"===req.responseType&&"string"==typeof body){var originalBody=body;body=body.replace(XSSI_PREFIX,"");try{body=""!==body?JSON.parse(body):null}catch(error){body=originalBody,ok&&(ok=!1,body={error:error,text:body})}}ok?(observer.next(new HttpResponse({body:body,headers:headers,status:status,statusText:statusText,url:url||void 0})),observer.complete()):observer.error(new HttpErrorResponse({error:body,headers:headers,status:status,statusText:statusText,url:url||void 0}))},onError=function(error){var res=new HttpErrorResponse({error:error,status:xhr.status||0,statusText:xhr.statusText||"Unknown Error"});observer.error(res)},sentHeaders=!1,onDownProgress=function(event){sentHeaders||(observer.next(partialFromXhr()),sentHeaders=!0);var progressEvent={type:HttpEventType.DownloadProgress,loaded:event.loaded};event.lengthComputable&&(progressEvent.total=event.total),"text"===req.responseType&&xhr.responseText&&(progressEvent.partialText=xhr.responseText),observer.next(progressEvent)},onUpProgress=function(event){var progress={type:HttpEventType.UploadProgress,loaded:event.loaded};event.lengthComputable&&(progress.total=event.total),observer.next(progress)};return xhr.addEventListener("load",onLoad),xhr.addEventListener("error",onError),req.reportProgress&&(xhr.addEventListener("progress",onDownProgress),null!==reqBody&&xhr.upload&&xhr.upload.addEventListener("progress",onUpProgress)),xhr.send(reqBody),observer.next({type:HttpEventType.Sent}),function(){xhr.removeEventListener("error",onError),xhr.removeEventListener("load",onLoad),req.reportProgress&&(xhr.removeEventListener("progress",onDownProgress),null!==reqBody&&xhr.upload&&xhr.upload.removeEventListener("progress",onUpProgress)),xhr.abort()}})},HttpXhrBackend.decorators=[{type:core.Injectable}],HttpXhrBackend.ctorParameters=function(){return[{type:XhrFactory}]},HttpXhrBackend}(),XSRF_COOKIE_NAME=new core.InjectionToken("XSRF_COOKIE_NAME"),XSRF_HEADER_NAME=new core.InjectionToken("XSRF_HEADER_NAME"),HttpXsrfTokenExtractor=function(){},HttpXsrfCookieExtractor=function(){function HttpXsrfCookieExtractor(doc,platform,cookieName){this.doc=doc,this.platform=platform,this.cookieName=cookieName,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return HttpXsrfCookieExtractor.prototype.getToken=function(){if("server"===this.platform)return null;var cookieString=this.doc.cookie||"";return cookieString!==this.lastCookieString&&(this.parseCount++,this.lastToken=common.ɵparseCookieValue(cookieString,this.cookieName),this.lastCookieString=cookieString),this.lastToken},HttpXsrfCookieExtractor.decorators=[{type:core.Injectable}],HttpXsrfCookieExtractor.ctorParameters=function(){return[{type:void 0,decorators:[{type:core.Inject,args:[common.DOCUMENT]}]},{type:void 0,decorators:[{type:core.Inject,args:[core.PLATFORM_ID]}]},{type:void 0,decorators:[{type:core.Inject,args:[XSRF_COOKIE_NAME]}]}]},HttpXsrfCookieExtractor}(),HttpXsrfInterceptor=function(){function HttpXsrfInterceptor(tokenService,headerName){this.tokenService=tokenService,this.headerName=headerName}return HttpXsrfInterceptor.prototype.intercept=function(req,next){var lcUrl=req.url.toLowerCase();if("GET"===req.method||"HEAD"===req.method||lcUrl.startsWith("http://")||lcUrl.startsWith("https://"))return next.handle(req);var token=this.tokenService.getToken();return null===token||req.headers.has(this.headerName)||(req=req.clone({headers:req.headers.set(this.headerName,token)})),next.handle(req)},HttpXsrfInterceptor.decorators=[{type:core.Injectable}],HttpXsrfInterceptor.ctorParameters=function(){return[{type:HttpXsrfTokenExtractor},{type:void 0,decorators:[{type:core.Inject,args:[XSRF_HEADER_NAME]}]}]},HttpXsrfInterceptor}(),HttpInterceptingHandler=function(){function HttpInterceptingHandler(backend,injector){this.backend=backend,this.injector=injector,this.chain=null}return HttpInterceptingHandler.prototype.handle=function(req){if(null===this.chain){var interceptors=this.injector.get(HTTP_INTERCEPTORS,[]);this.chain=interceptors.reduceRight(function(next,interceptor){return new HttpInterceptorHandler(next,interceptor)},this.backend)}return this.chain.handle(req)},HttpInterceptingHandler.decorators=[{type:core.Injectable}],HttpInterceptingHandler.ctorParameters=function(){return[{type:HttpBackend},{type:core.Injector}]},HttpInterceptingHandler}(),HttpClientXsrfModule=function(){function HttpClientXsrfModule(){}return HttpClientXsrfModule.disable=function(){return{ngModule:HttpClientXsrfModule,providers:[{provide:HttpXsrfInterceptor,useClass:NoopInterceptor}]}},HttpClientXsrfModule.withOptions=function(options){return void 0===options&&(options={}),{ngModule:HttpClientXsrfModule,providers:[options.cookieName?{provide:XSRF_COOKIE_NAME,useValue:options.cookieName}:[],options.headerName?{provide:XSRF_HEADER_NAME,useValue:options.headerName}:[]]}},HttpClientXsrfModule.decorators=[{type:core.NgModule,args:[{providers:[HttpXsrfInterceptor,{provide:HTTP_INTERCEPTORS,useExisting:HttpXsrfInterceptor,multi:!0},{provide:HttpXsrfTokenExtractor,useClass:HttpXsrfCookieExtractor},{provide:XSRF_COOKIE_NAME,useValue:"XSRF-TOKEN"},{provide:XSRF_HEADER_NAME,useValue:"X-XSRF-TOKEN"}]}]}],HttpClientXsrfModule.ctorParameters=function(){return[]},HttpClientXsrfModule}(),HttpClientModule=function(){function HttpClientModule(){}return HttpClientModule.decorators=[{type:core.NgModule,args:[{imports:[HttpClientXsrfModule.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})],providers:[HttpClient,{provide:HttpHandler,useClass:HttpInterceptingHandler},HttpXhrBackend,{provide:HttpBackend,useExisting:HttpXhrBackend},BrowserXhr,{provide:XhrFactory,useExisting:BrowserXhr}]}]}],HttpClientModule.ctorParameters=function(){return[]},HttpClientModule}(),AgmDirection=function(){function AgmDirection(gmapsApi,http){this.gmapsApi=gmapsApi,this.http=http,this.travelMode="DRIVING",this.transitOptions=void 0,this.drivingOptions=void 0,this.waypoints=[],this.optimizeWaypoints=!0,this.provideRouteAlternatives=!1,this.avoidHighways=!1,this.avoidTolls=!1,this.visible=!0,this.onChange=new core.EventEmitter,this.onResponse=new core.EventEmitter,this.sendInfoWindow=new core.EventEmitter,this.directionsService=void 0,this.directionsDisplay=void 0,this.waypointsMarker=[],this.isFirstChange=!0}return AgmDirection.prototype.ngOnInit=function(){!0===this.visible&&this.directionDraw()},AgmDirection.prototype.ngOnChanges=function(obj){if(this.visible){if(this.isFirstChange)return void 0===this.directionsDisplay&&this.directionDraw(),void(this.isFirstChange=!1);void 0!==obj.renderOptions&&!1===obj.renderOptions.firstChange&&(void 0!==this.originMarker&&(this.originMarker.setMap(null),this.destinationMarker.setMap(null),this.waypointsMarker.forEach(function(w){return w.setMap(null)})),this.directionsDisplay.setPanel(null),this.directionsDisplay.setMap(null),this.directionsDisplay=void 0),this.directionDraw()}else try{void 0!==this.originMarker&&(this.originMarker.setMap(null),this.destinationMarker.setMap(null),this.waypointsMarker.forEach(function(w){return w.setMap(null)})),this.directionsDisplay.setPanel(null),this.directionsDisplay.setMap(null),this.directionsDisplay=void 0}catch(e){}},AgmDirection.prototype.directionDraw=function(){var _this=this;this.gmapsApi.getNativeMap().then(function(map){void 0===_this.directionsDisplay&&(_this.directionsDisplay=new google.maps.DirectionsRenderer(_this.renderOptions),_this.directionsDisplay.setMap(map),_this.directionsDisplay.addListener("directions_changed",function(){_this.onChange.emit(_this.directionsDisplay.getDirections())})),void 0===_this.directionsService&&(_this.directionsService=new google.maps.DirectionsService),void 0===_this.panel?_this.directionsDisplay.setPanel(null):_this.directionsDisplay.setPanel(_this.panel);var requestObj={origin:_this.origin,destination:_this.destination,waypoints:_this.waypoints};var hash=function(s){for(var i=0,h=0;i<s.length;i++)h=Math.imul(31,h)+s.charCodeAt(i)|0;return h}(JSON.stringify(requestObj));"object"==typeof _this.renderRoute&&null!==_this.renderRoute?(_this.directionsDisplay.setDirections(_this.renderRoute),_this.renderRoute=null):_this.http.get("/umbraco/api/thirdpartycaching/GetGoogleDirections?request="+hash).subscribe(function(cacheResponse){if(console.log("cached response: ",cacheResponse),null==cacheResponse)_this.directionsService.route({origin:_this.origin,destination:_this.destination,travelMode:_this.travelMode,transitOptions:_this.transitOptions,drivingOptions:_this.drivingOptions,waypoints:_this.waypoints,optimizeWaypoints:_this.optimizeWaypoints,provideRouteAlternatives:_this.provideRouteAlternatives,avoidHighways:_this.avoidHighways,avoidTolls:_this.avoidTolls},function(response,status){if(_this.onResponse.emit(response),"OK"===status&&(_this.directionsDisplay.setDirections(response),_this.http.post("/umbraco/api/thirdpartycaching/SaveGoogleDirections?request="+hash,response).subscribe(function(saveRes){console.log("save response:",saveRes)}),void 0!==_this.markerOptions)){try{void 0!==_this.originMarker&&(google.maps.event.clearListeners(_this.originMarker,"click"),_this.originMarker.setMap(null)),void 0!==_this.destinationMarker&&(google.maps.event.clearListeners(_this.destinationMarker,"click"),_this.destinationMarker.setMap(null)),_this.waypointsMarker.forEach(function(w){void 0!==w&&(google.maps.event.clearListeners(w,"click"),w.setMap(null))})}catch(err){console.error("Can not reset custom marker.",err)}var _route_1=response.routes[0].legs[0];try{void 0!==_this.markerOptions.origin&&(_this.markerOptions.origin.map=map,_this.markerOptions.origin.position=_route_1.start_location,_this.originMarker=_this.setMarker(map,_this.originMarker,_this.markerOptions.origin,_route_1.start_address)),void 0!==_this.markerOptions.destination&&(_this.markerOptions.destination.map=map,_this.markerOptions.destination.position=_route_1.end_location,_this.destinationMarker=_this.setMarker(map,_this.destinationMarker,_this.markerOptions.destination,_route_1.end_address)),void 0!==_this.markerOptions.waypoints&&_this.waypoints.forEach(function(waypoint,index){Array.isArray(_this.markerOptions.waypoints)?(_this.markerOptions.waypoints[index].map=map,_this.markerOptions.waypoints[index].position=_route_1.via_waypoints[index],_this.waypointsMarker.push(_this.setMarker(map,waypoint,_this.markerOptions.waypoints[index],_route_1.via_waypoints[index]))):(_this.markerOptions.waypoints.map=map,_this.markerOptions.waypoints.position=_route_1.via_waypoints[index],_this.waypointsMarker.push(_this.setMarker(map,waypoint,_this.markerOptions.waypoints,_route_1.via_waypoints[index])))})}catch(err){console.error("MarkerOptions error.",err)}}});else if(_this.onResponse.emit(cacheResponse),_this.directionsDisplay.setDirections(cacheResponse),void 0!==_this.markerOptions){try{void 0!==_this.originMarker&&(google.maps.event.clearListeners(_this.originMarker,"click"),_this.originMarker.setMap(null)),void 0!==_this.destinationMarker&&(google.maps.event.clearListeners(_this.destinationMarker,"click"),_this.destinationMarker.setMap(null)),_this.waypointsMarker.forEach(function(w){void 0!==w&&(google.maps.event.clearListeners(w,"click"),w.setMap(null))})}catch(err){console.error("Can not reset custom marker.",err)}var _route_2=cacheResponse.routes[0].legs[0];try{void 0!==_this.markerOptions.origin&&(_this.markerOptions.origin.map=map,_this.markerOptions.origin.position=_route_2.start_location,_this.originMarker=_this.setMarker(map,_this.originMarker,_this.markerOptions.origin,_route_2.start_address)),void 0!==_this.markerOptions.destination&&(_this.markerOptions.destination.map=map,_this.markerOptions.destination.position=_route_2.end_location,_this.destinationMarker=_this.setMarker(map,_this.destinationMarker,_this.markerOptions.destination,_route_2.end_address)),void 0!==_this.markerOptions.waypoints&&_this.waypoints.forEach(function(waypoint,index){Array.isArray(_this.markerOptions.waypoints)?(_this.markerOptions.waypoints[index].map=map,_this.markerOptions.waypoints[index].position=_route_2.via_waypoints[index],_this.waypointsMarker.push(_this.setMarker(map,waypoint,_this.markerOptions.waypoints[index],_route_2.via_waypoints[index]))):(_this.markerOptions.waypoints.map=map,_this.markerOptions.waypoints.position=_route_2.via_waypoints[index],_this.waypointsMarker.push(_this.setMarker(map,waypoint,_this.markerOptions.waypoints,_route_2.via_waypoints[index])))})}catch(err){console.error("MarkerOptions error.",err)}}})})},AgmDirection.prototype.setMarker=function(map,marker,markerOpts,content){var _this=this;return void 0===this.infoWindow&&(this.infoWindow=new google.maps.InfoWindow({}),this.sendInfoWindow.emit(this.infoWindow)),(marker=new google.maps.Marker(markerOpts)).addListener("click",function(){var infowindoContent=void 0===markerOpts.infoWindow?content:markerOpts.infoWindow;_this.infoWindow.setContent(infowindoContent),_this.infoWindow.open(map,marker)}),marker},AgmDirection.decorators=[{type:core.Directive,args:[{selector:"agm-direction"}]}],AgmDirection.ctorParameters=function(){return[{type:GoogleMapsAPIWrapper},{type:HttpClient}]},AgmDirection.propDecorators={origin:[{type:core.Input}],destination:[{type:core.Input}],travelMode:[{type:core.Input}],transitOptions:[{type:core.Input}],drivingOptions:[{type:core.Input}],waypoints:[{type:core.Input}],optimizeWaypoints:[{type:core.Input}],provideRouteAlternatives:[{type:core.Input}],avoidHighways:[{type:core.Input}],avoidTolls:[{type:core.Input}],renderOptions:[{type:core.Input}],visible:[{type:core.Input}],panel:[{type:core.Input}],markerOptions:[{type:core.Input}],infoWindow:[{type:core.Input}],renderRoute:[{type:core.Input}],onChange:[{type:core.Output}],onResponse:[{type:core.Output}],sendInfoWindow:[{type:core.Output}]},AgmDirection}(),AgmDirectionModule=function(){function AgmDirectionModule(){}return AgmDirectionModule.forRoot=function(){return{ngModule:AgmDirectionModule}},AgmDirectionModule.decorators=[{type:core.NgModule,args:[{imports:[HttpClientModule],declarations:[AgmDirection],exports:[AgmDirection]}]}],AgmDirectionModule}();exports.AgmDirectionModule=AgmDirectionModule,exports.ɵa=AgmDirection,Object.defineProperty(exports,"__esModule",{value:!0})});